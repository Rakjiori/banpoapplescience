<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" lang="ko"
      th:replace="layout :: layout(~{::body})">
<body>
<style>
    .accordion-header { display:flex; justify-content:space-between; align-items:center; padding:12px 14px; background:#0f172a; color:#e5e7eb; border-radius:12px; cursor:pointer; }
    .accordion-panel { margin-top:10px; }
    .share-tile { padding:12px; border:1px solid #e5e7eb; border-radius:12px; background:#f8fafc; display:flex; justify-content:space-between; align-items:center; gap:10px; box-shadow:0 8px 18px rgba(0,0,0,0.05); }
    .hero-shared { background:linear-gradient(135deg,#1e293b,#0b1324); color:#e5e7eb; padding:18px; border-radius:16px; box-shadow:0 18px 36px rgba(0,0,0,0.3); margin-bottom:14px; }
</style>
<div>
    <div class="hero-shared">
        <h1 class="page-title" style="color:#fff;">공유된 문제 모아보기</h1>
        <p style="color:#cbd5e1;">친구나 그룹에서 받은 문제를 한 눈에 확인하고 풀어보세요.</p>
    </div>

    <div class="card" style="margin-bottom:12px;">
        <div class="accordion-header" id="toggleInbox">
            <div style="font-weight:700;">대기 중</div>
            <span aria-hidden="true">▼</span>
        </div>
        <div id="inboxPanel" class="accordion-panel">
            <div th:if="${#lists.isEmpty(inbox)}" style="color:#6b7280;">대기 중인 공유 요청이 없습니다.</div>
            <div th:each="s : ${inbox}" class="share-tile" style="margin-bottom:8px;">
                <div>
                    <div style="font-weight:700;" th:text="${s.fromUser.username}">from</div>
                    <div style="font-size:12px; color:#6b7280;" th:text="${s.question.questionText}">문제</div>
                </div>
                <a class="btn btn-outline" th:href="@{/quiz/solve/{id}(id=${s.question.id})}">풀어보기</a>
            </div>
        </div>
    </div>

    <div class="card">
        <div class="accordion-header" id="toggleAccepted">
            <div style="font-weight:700;">받은 공유</div>
            <span aria-hidden="true">▼</span>
        </div>
        <div id="acceptedPanel" class="accordion-panel">
            <div th:if="${#lists.isEmpty(accepted)}" style="color:#6b7280;">완료된 공유가 없습니다.</div>
            <div th:each="s : ${accepted}" class="share-tile" style="margin-bottom:8px;">
                <div>
                    <div style="font-weight:700;" th:text="${s.fromUser.username}">from</div>
                    <div style="font-size:12px; color:#6b7280;" th:text="${s.question.questionText}">문제</div>
                </div>
                <a class="btn btn-outline" th:href="@{/quiz/solve/{id}(id=${s.question.id})}">풀어보기</a>
            </div>
        </div>
    </div>
</div>
<script>
    document.addEventListener('DOMContentLoaded', () => {
        const bindToggle = (headerId, panelId) => {
            const h = document.getElementById(headerId);
            const p = document.getElementById(panelId);
            if (!h || !p) return;
            p.style.display = 'none';
            h.addEventListener('click', () => {
                p.style.display = p.style.display === 'none' ? 'block' : 'none';
            });
        };
        bindToggle('toggleInbox', 'inboxPanel');
        bindToggle('toggleAccepted', 'acceptedPanel');
    });
</script>
</body>
</html>
