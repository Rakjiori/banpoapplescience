  <!-- templates/navbar.html -->
<nav class="navbar" th:fragment="nav">
  <div class="navbar-inner">
    <a class="brand" th:href="@{/}">
      <img class="brand-logo" th:src="@{/image/logo2.png}" alt="애플과학 로고">
      <div class="brand-text">
        <div class="brand-name">애플과학</div>
      </div>
    </a>

    <ul class="nav-links">
      <li><a th:href="@{/#schedule}" data-scroll>시간표</a></li>
      <li><a th:href="@{/#notice}" data-scroll>공지사항</a></li>
      <li><a th:href="@{/#reviews}" data-scroll>수강후기</a></li>
      <li><a th:href="@{/#location}" data-scroll>오시는길</a></li>
      <li><a th:href="@{/#questions}" data-scroll>질문게시판</a></li>
    </ul>

    <!-- 우측 로그인/상태 -->
    <div class="user-status nav-actions">
      <a class="nav-pill ghost" th:href="@{/learning}">학습 포털</a>
      <div class="notif-wrapper" th:if="${#authorization.expression('isAuthenticated()')}">
        <button type="button" class="icon-button" id="notificationBell">
          <span class="bell-icon" aria-hidden="true">🔔</span>
          <span class="badge" id="notificationBadge" style="display:none;">0</span>
        </button>
        <div class="notification-panel" id="notificationPanel">
          <div class="notification-header">알림</div>
          <div class="notification-list" id="notificationList">
            <div class="notification-empty">새 알림이 없습니다.</div>
          </div>
          <div style="padding:8px; text-align:right; border-top:1px solid #e5e7eb;">
            <a href="/notifications" class="btn btn-outline btn-sm">알림 전체보기</a>
          </div>
        </div>
      </div>
      <div class="profile-wrapper" th:if="${#authorization.expression('isAuthenticated()')}">
        <button type="button" class="icon-button" id="profileButton">
          <span class="profile-icon" aria-hidden="true"
                th:text="${@userService.getUser(#authentication.name)?.avatar != null ? @userService.getUser(#authentication.name).avatar : '👤'}">👤</span>
        </button>
        <div class="profile-panel" id="profilePanel">
          <div class="profile-header">
            <div class="avatar"
                 th:text="${@userService.getUser(#authentication.name)?.avatar != null ? @userService.getUser(#authentication.name).avatar : '🧑'}">🧑</div>
            <div>
              <div class="profile-name" th:text="${#authentication.name}">사용자</div>
              <div class="profile-sub">내 계정</div>
            </div>
          </div>
          <div class="profile-list">
            <a href="/learning" class="profile-item">학습 포털</a>
            <a href="/groups" class="profile-item">내 그룹 보기</a>
            <a href="/account" class="profile-item">내 정보 수정</a>
            <a href="/admin/content" class="profile-item"
               th:if="${#authorization.expression('hasAnyAuthority(''ROLE_ADMIN'',''ROLE_ROOT'')')}">학원 콘텐츠 관리</a>
            <a href="/admin/users" class="profile-item"
               th:if="${#authorization.expression('hasAnyAuthority(''ROLE_ADMIN'',''ROLE_ROOT'')')}">관리자/계정 현황</a>
            <a href="/admin/members" class="profile-item"
               th:if="${#authorization.expression('hasAnyAuthority(''ROLE_ADMIN'',''ROLE_ROOT'')')}">학원생 출석/회비 관리</a>
            <a href="/admin/notes" class="profile-item"
               th:if="${#authorization.expression('hasAnyAuthority(''ROLE_ADMIN'',''ROLE_ROOT'')')}">관리자 인수인계 게시판</a>
            <a href="/logout" class="profile-item">로그아웃</a>
          </div>
        </div>
      </div>
      <div class="nav-auth" th:if="${#authorization.expression('!isAuthenticated()')}">
        <a class="nav-pill solid" href="/login">Login</a>
        <a class="nav-pill outline" href="/signup">회원가입</a>
      </div>
    </div>
  </div>
</nav>
