<!DOCTYPE html>
<html lang="ko"
      xmlns:th="http://www.thymeleaf.org"
      th:replace="layout :: layout (~{::body})"
      th:with="content='this :: content'">

<body>
<div th:fragment="content">

    <style>
        .hero {
            position:relative;
            overflow:hidden;
            border-radius:24px;
            background:linear-gradient(135deg,#0f172a,#3b4b8f,#60a5fa);
            color:#fff;
            padding:28px;
            min-height:180px;
            box-shadow:0 16px 38px rgba(0,0,0,0.25);
        }
        .hero::after {
            content:'';
            position:absolute;
            inset:-40px 10% auto auto;
            width:200px;
            height:200px;
            background:radial-gradient(circle at center, rgba(255,255,255,0.18), transparent 60%);
            filter:blur(12px);
            animation:float 7s ease-in-out infinite;
        }
        .hero h1 { margin:0 0 8px; font-size:24px; }
        .hero-sub { color:#e2e8f0; font-size:14px; margin:0 0 16px; }
        .cta-row { display:flex; gap:10px; flex-wrap:wrap; }
        .btn-strong {
            background:#facc15;
            color:#1f2937;
            font-weight:800;
            border:none;
            padding:12px 16px;
            border-radius:12px;
            box-shadow:0 10px 24px rgba(250,204,21,0.3);
            transition:transform 0.15s ease, box-shadow 0.15s ease;
        }
        .btn-strong:hover { transform:translateY(-1px); box-shadow:0 14px 32px rgba(250,204,21,0.35); }
        .stat-grid {
            display:grid;
            grid-template-columns:repeat(auto-fit, minmax(160px,1fr));
            gap:12px;
            margin-top:14px;
        }
        .stat-card {
            background:#fff;
            border-radius:14px;
            padding:14px;
            box-shadow:0 10px 24px rgba(0,0,0,0.06);
            display:flex;
            gap:10px;
            align-items:center;
            border:1px solid #e5e7eb;
        }
        .stat-icon { font-size:20px; width:36px; height:36px; display:grid; place-items:center; border-radius:12px; }
        .ranking-card { display:flex; align-items:center; gap:12px; margin:8px 0; padding:10px; border-radius:12px; border:1px solid #e5e7eb; background:#fff; }
        .rank-medal { width:42px; text-align:center; font-weight:700; font-size:16px; }
        @keyframes float { 0%,100% { transform:translateY(0);} 50% { transform:translateY(-6px);} }
    </style>

    <div class="container">

        <div class="hero">
            <div style="display:flex; flex-wrap:wrap; gap:14px; align-items:flex-end;">
                <div style="flex:1 1 280px;">
                    <h1>PDFë¡œ ë¬¸ì œë¥¼ ë§Œë“¤ê³ , ë§¤ì¼ ì„±ì¥í•˜ì„¸ìš”.</h1>
                    <p class="hero-sub">ì—…ë¡œë“œ â†’ ìƒì„± â†’ í’€ì´ê¹Œì§€ í•œ ë²ˆì—. ì˜¤ëŠ˜ ì–¼ë§ˆë‚˜ í’€ì—ˆëŠ”ì§€ ë°”ë¡œ í™•ì¸í•˜ê³  ë‹¬ë ¤ë³´ì„¸ìš”.</p>
                    <div class="cta-row">
                        <a th:href="@{/quiz/list}" class="btn-strong">ğŸ“ My Questions</a>
                        <a th:href="@{/folders}" class="btn btn-outline" style="background:#fff; color:#0f172a; width:44px; text-align:center;">ğŸ“‚</a>
                        <a th:href="@{/document/upload}" class="btn btn-outline" style="background:#fff; color:#0f172a; width:44px; text-align:center;">â¬†ï¸</a>
                    </div>
                </div>
                <div class="card" style="flex:0 0 240px; background:rgba(255,255,255,0.08); border:1px solid rgba(255,255,255,0.2); color:#fff;">
                    <div style="font-weight:700; margin-bottom:6px;">ì˜¤ëŠ˜ì˜ ì§„í–‰</div>
                    <div style="display:flex; flex-direction:column; gap:8px;">
                        <div>ì˜¤ëŠ˜ í‘¼ ë¬¸ì œ: <span id="todaySolved" th:text="${todaySolvedCount != null ? todaySolvedCount : 0}">0</span>ê°œ</div>
                        <div>ì—°ì† ì¼ì¼í’€ì´: <span th:text="${sessionUser != null ? sessionUser.streak : 0}">0</span>ì¼</div>
                        <div>ë³´ìœ  í¬ì¸íŠ¸: <span th:text="${sessionUser != null ? sessionUser.points : 0}">0</span>P</div>
                    </div>
                </div>
            </div>
        </div>

        <div class="stat-grid">
            <div class="stat-card">
                <div class="stat-icon" style="background:#eef2ff;">ğŸ’</div>
                <div>
                    <div style="font-size:12px; color:#6b7280;">í¬ì¸íŠ¸</div>
                    <div style="font-weight:800;" th:text="${sessionUser != null ? sessionUser.points : 0}">0</div>
                    <a class="btn btn-outline" href="/shop" style="margin-top:6px; padding:6px 10px;">ìƒì ìœ¼ë¡œ</a>
                </div>
            </div>
            <div class="stat-card">
                <div class="stat-icon" style="background:#ecfccb;">ğŸ”¥</div>
                <div>
                    <div style="font-size:12px; color:#6b7280;">ì—°ì† í’€ì´</div>
                    <div style="font-weight:800;" th:text="${sessionUser != null ? sessionUser.streak : 0}">0</div>
                </div>
            </div>
            <div class="stat-card">
                <div class="stat-icon" style="background:#e0f2fe;">ğŸ“Œ</div>
                <div>
                    <div style="font-size:12px; color:#6b7280;">ì˜¤ëŠ˜ í‘¼ ë¬¸ì œ</div>
                    <div style="font-weight:800;" id="statTodaySolved" th:text="${todaySolvedCount != null ? todaySolvedCount : 0}">0</div>
                </div>
            </div>
            <div class="stat-card">
                <div class="stat-icon" style="background:#fef3c7;">ğŸ‘¤</div>
                <div>
                    <div style="font-size:12px; color:#6b7280;">ë‚´ í˜ì´ì§€</div>
                    <a class="btn btn-outline" href="/profile" style="padding:6px 10px;">ë°”ë¡œ ê°€ê¸°</a>
                </div>
            </div>
        </div>

        <div class="card" style="margin-top:16px;">
            <div style="display:flex; align-items:center; gap:10px; margin-bottom:10px;">
                <h3 style="margin:0; font-size:16px;">ì£¼ê°„ ë­í‚¹ (Top 5)</h3>
                <span style="color:#6b7280; font-size:12px;">ì¹œêµ¬ë“¤ê³¼ ìŒ“ì€ í¬ì¸íŠ¸ ê¸°ì¤€</span>
            </div>
            <div th:if="${weeklyRanking == null}" style="color:#6b7280; font-size:13px;">ë¡œê·¸ì¸í•˜ë©´ ì¹œêµ¬ë“¤ê³¼ ë­í‚¹ì„ ë³¼ ìˆ˜ ìˆì–´ìš”.</div>
            <div th:if="${weeklyRanking != null}">
                <div th:each="r : ${weeklyRanking}" class="ranking-card">
                    <div class="rank-medal"
                         th:classappend="${r.rank() <= 3} ? ' rank-medal--medal' : ''"
                         th:styleappend="${r.rank() == 1} ? 'color:#d97706;' : (${r.rank()==2} ? 'color:#6b7280;' : (${r.rank()==3} ? 'color:#b45309;' : 'color:#475569;'))"
                         th:text="${r.rank() <= 3 ? r.medal() : r.rank()}">ğŸ¥‡</div>
                    <div class="ranking-avatar-group">
                        <span class="ranking-avatar"
                              th:text="${r.user().avatar != null ? r.user().avatar : 'ğŸ§‘'}">ğŸ§‘</span>
                    </div>
                    <div style="flex:1;">
                        <div style="font-weight:700;" th:text="${r.user().username}">user</div>
                        <div style="color:#6b7280; font-size:12px;">í¬ì¸íŠ¸
                            <span th:text="${r.user().points}">0</span> Â· ì—°ì†
                            <span th:text="${r.user().streak}">0</span>ì¼
                        </div>
                    </div>
                    <div class="pill-soft" style="min-width:90px; text-align:center; background:#eef2ff;"
                         th:text="|${r.user().points} P|">0 P</div>
                </div>
            </div>
        </div>
 
    </div>
 
</div>

<script>
    document.addEventListener('DOMContentLoaded', ()=>{
        const hero = document.querySelector('.hero, .stat-hero');
        if (hero) {
            hero.style.transition = 'transform 0.25s ease';
            hero.addEventListener('mousemove', (e)=>{
                const r = hero.getBoundingClientRect();
                const dx = (e.clientX - r.left - r.width/2) / r.width;
                const dy = (e.clientY - r.top - r.height/2) / r.height;
                hero.style.transform = `translateY(${dy * 4}px) scale(1.003)`;
            });
            hero.addEventListener('mouseleave', ()=> hero.style.transform = 'translateY(0) scale(1)');
        }
    });
</script>
</body>
</html>
