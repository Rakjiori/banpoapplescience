<!DOCTYPE html>
<html lang="ko"
      xmlns:th="http://www.thymeleaf.org"
      th:replace="layout :: layout (~{::body})"
      th:with="content='this :: content', pageClass='landing-shell'">

<body>
<div th:fragment="content">

    <style>
        .landing-hero {
            position: relative;
            overflow: hidden;
            border-radius: 22px;
            background: radial-gradient(circle at 20% 20%, rgba(155,215,255,0.4), transparent 32%),
                        radial-gradient(circle at 80% 30%, rgba(219,234,254,0.35), transparent 36%),
                        linear-gradient(135deg, #f6f9ff 0%, #e7f1ff 50%, #d1e8ff 100%);
            color: #0f172a;
            padding: 32px 28px;
            box-shadow: 0 16px 48px rgba(15,23,42,0.18);
        }
        .hero-aurora {
            position:absolute; inset:0;
            background: radial-gradient(ellipse at 30% 50%, rgba(255,255,255,0.32), transparent 40%),
                        linear-gradient(120deg, rgba(209,232,255,0.32), rgba(255,255,255,0));
            mix-blend-mode: screen;
            opacity:0.85;
            animation: aurora 12s ease-in-out infinite alternate;
            pointer-events:none;
        }
        .hero-glow, .hero-glow-2 {
            position:absolute; inset:-20% -20% auto auto;
            width: 320px; height: 320px; border-radius: 50%;
            background: radial-gradient(circle, rgba(183,212,255,0.4), transparent 55%);
            filter: blur(32px);
            animation: float 12s ease-in-out infinite;
            pointer-events:none;
        }
        .hero-glow-2 { inset:auto auto -28% -12%; width:360px; height:360px; animation-duration: 10s; animation-direction: reverse; }
        .hero-grid {
            display: grid;
            grid-template-columns: 1fr 0.9fr;
            gap: 20px;
            align-items: center;
        }
        .eyebrow { text-transform: none; letter-spacing: 0.02em; font-weight: 800; font-size: 15px; margin: 0 0 12px; color: #0f172a; }
        .landing-hero h1 { margin: 0 0 12px; font-size: 38px; letter-spacing: -0.03em; line-height:1.1; color:#0f172a; }
        .hero-kicker { font-size: 18px; color:#1f3557; margin: 0 0 12px; font-weight:700; }
        .hero-sub { margin: 0 0 16px; color: #334155; font-size: 15px; max-width: 560px; }
        .hero-tags { display:flex; gap:10px; flex-wrap:wrap; margin-bottom:14px; }
        .hero-tag { padding:8px 12px; background: rgba(255,255,255,0.9); border:1px solid rgba(148,163,184,0.35); border-radius:10px; font-weight:800; color:#1f2937; }
        .hero-actions { display:flex; gap:10px; flex-wrap:wrap; margin-bottom:12px; }
        .cta { padding: 12px 16px; border-radius: 12px; font-weight: 800; letter-spacing: 0.01em; border: 1px solid rgba(148,163,184,0.35); color: #0f172a; background:#f8fbff; box-shadow:0 10px 24px rgba(15,23,42,0.12); transition:0.18s ease; }
        .cta.primary { background: linear-gradient(135deg, #e6f2ff, #d1e8ff); color:#0f172a; border-color: transparent; }
        .cta.outline { background: transparent; color:#0f172a; border-color: rgba(31,47,79,0.25); }
        .cta.ghost { background: rgba(255,255,255,0.9); color:#0f172a; }
        .cta:hover { transform: translateY(-1px); text-decoration: none; box-shadow:0 14px 28px rgba(15,23,42,0.14); }
        .hero-footnote { font-size: 13px; color:#334155; margin-top:6px; display:flex; gap:10px; flex-wrap:wrap; }

        .hero-panel {
            background: rgba(255,255,255,0.95);
            border: 1px solid rgba(226,232,240,0.9);
            border-radius: 14px;
            padding: 16px;
            backdrop-filter: blur(8px);
            box-shadow: 0 12px 28px rgba(15,23,42,0.12);
        }
        .panel-header { font-weight: 800; font-size: 14px; color:#0f172a; margin-bottom:10px; display:flex; align-items:center; gap:6px; }
        .panel-badge { padding:6px 10px; border-radius:10px; background: rgba(155,215,255,0.4); color:#0f172a; font-weight:700; font-size:12px; }
        .panel-row { display:flex; align-items:flex-start; gap:12px; padding:10px 0; border-bottom:1px solid rgba(226,232,240,0.9); }
        .panel-row:last-child { border-bottom:none; }
        .panel-time { font-weight:800; min-width:68px; }
        .panel-desc { color:#334155; font-size:13px; }
        .panel-metrics { display:flex; flex-wrap:wrap; gap:8px; margin-top:8px; }
        .metric { background: rgba(219,234,254,0.6); border:1px solid rgba(148,163,184,0.35); border-radius:10px; padding:10px 12px; display:flex; align-items:center; gap:10px; color:#0f172a; font-weight:700; font-size:12px; text-decoration:none; transition:0.18s ease; }
        .metric-icon { width:24px; height:24px; display:grid; place-items:center; background:rgba(255,255,255,0.95); border-radius:8px; color:#1e3a8a; font-size:13px; }
        .metric-title { font-weight:800; font-size:13px; }
        .metric-sub { font-weight:600; color:#1e293b; opacity:0.8; font-size:12px; }
        .metric.clickable { cursor:pointer; }
        .metric.clickable:hover { transform: translateY(-1px); box-shadow: 0 10px 24px rgba(15,23,42,0.14); }

        .landing-section { margin-top: 28px; padding: 24px; background: #ffffff; border-radius: 18px; border:1px solid #e2e8f0; box-shadow:0 18px 38px rgba(15,23,42,0.08); }
        .section-head { display:flex; justify-content:space-between; gap:12px; align-items:flex-end; flex-wrap:wrap; margin-bottom:16px; }
        .section-head h2 { margin:0; font-size:22px; }
        .section-sub { color:#64748b; margin:4px 0 0; font-size:14px; }
        .pill { padding:8px 12px; border-radius:12px; background:rgba(155,215,255,0.4); color:#0f172a; font-weight:800; font-size:12px; }

        .schedule-grid { display:grid; grid-template-columns:repeat(auto-fit,minmax(260px,1fr)); gap:12px; }
        .schedule-card { border:1px solid #d9e4f2; border-radius:14px; padding:16px; background:linear-gradient(160deg, #f8fbff, #eef5ff); box-shadow:0 10px 24px rgba(15,23,42,0.08); }
        .schedule-title { font-weight:800; margin:0 0 6px; color:#0f172a; }
        .schedule-meta { color:#0f766e; font-size:13px; font-weight:700; margin-bottom:10px; }
        .time-row { display:flex; justify-content:space-between; padding:6px 0; border-bottom:1px dashed #d6e3f0; font-size:13px; }
        .time-row:last-child { border-bottom:none; }
        .label-ghost { padding:4px 8px; background:#0f172a; color:#e2e8f0; border-radius:10px; font-size:12px; }

        .notice-grid { display:grid; grid-template-columns:repeat(auto-fit,minmax(240px,1fr)); gap:12px; }
        .notice-card { border:1px solid #d9e4f2; border-radius:14px; padding:14px; background: linear-gradient(160deg, #ffffff, #f5f8ff); box-shadow:0 12px 24px rgba(15,23,42,0.06); }
        .notice-date { font-size:12px; color:#64748b; }
        .notice-title { font-weight:800; margin:6px 0; color:#0f172a; }
        .notice-body { color:#475569; font-size:13px; }

        .review-grid { display:grid; grid-template-columns:repeat(auto-fit,minmax(240px,1fr)); gap:12px; }
        .review-card { border:1px solid #d9e4f2; border-radius:14px; padding:16px; background:#ffffff; box-shadow:0 12px 28px rgba(15,23,42,0.08); position:relative; overflow:hidden; }
        .review-card::after { content:''; position:absolute; inset:-18% auto auto -8%; width:120px; height:120px; background:radial-gradient(circle, rgba(155,215,255,0.28), transparent 55%); transform:rotate(8deg); filter: blur(2px); }
        .review-stars { color:#f59e0b; font-weight:800; position:relative; text-shadow:0 0 8px rgba(155,215,255,0.65), 0 0 14px rgba(155,215,255,0.45); }
        .review-stars::after { content:''; position:absolute; left:-8px; right:-8px; top:50%; height:16px; transform:translateY(-50%); background:radial-gradient(circle, rgba(155,215,255,0.5), transparent 65%); filter:blur(8px); pointer-events:none; }
        .review-text { color:#0f172a; font-size:14px; margin:8px 0 12px; line-height:1.6; position:relative; }
        .reviewer { font-weight:700; color:#1e3a8a; position:relative; }
        .review-grid-wrap { max-height: 360px; overflow: auto; padding-right: 6px; }

        .dual { display:grid; grid-template-columns:1fr 1.1fr; gap:16px; align-items:stretch; }
        .location-copy h3 { margin:8px 0 10px; }
        .location-points { list-style:none; padding:0; margin:0; display:grid; gap:8px; color:#334155; }
        .location-points li { display:flex; gap:8px; align-items:flex-start; }
        .map-wrap { position:relative; border-radius:14px; overflow:hidden; border:1px solid #e2e8f0; box-shadow:0 14px 30px rgba(15,23,42,0.12); min-height:260px; }
        .map-wrap iframe { width:100%; height:100%; border:0; }

        .callout { background:linear-gradient(120deg, #0f172a, #0f766e); color:#e2e8f0; overflow:hidden; }
        .callout-inner { display:flex; justify-content:space-between; align-items:center; gap:14px; flex-wrap:wrap; }
        .callout-actions { display:flex; gap:10px; flex-wrap:wrap; }

        .question-board { display:grid; gap:12px; }
        .question-form { display:grid; gap:10px; background:#f8fafc; border:1px solid #e2e8f0; border-radius:14px; padding:14px; box-shadow:0 10px 24px rgba(15,23,42,0.08); }
        .question-form input, .question-form textarea { width:100%; border:1px solid #d9e4f2; border-radius:10px; padding:10px; font-size:14px; }
        .question-form textarea { min-height:110px; }
        .question-list { border:1px solid #e2e8f0; border-radius:14px; overflow:hidden; box-shadow:0 10px 24px rgba(15,23,42,0.08); }
        .question-row { display:grid; grid-template-columns: 68px 1fr 140px; align-items:center; gap:10px; padding:10px; border-bottom:1px solid #e5e7eb; }
        .question-row.header { background:#f8fafc; font-weight:700; }
        .question-row:last-child { border-bottom:none; }
        .question-title { font-weight:700; color:#0f172a; }
        .question-meta { font-size:12px; color:#64748b; }
        .question-actions { display:flex; gap:8px; justify-content:flex-end; }
        .question-title-btn { background:none; border:none; padding:0; text-align:left; color:#0f172a; font-weight:800; cursor:pointer; }
        .question-title-btn:hover { text-decoration:underline; }

        .question-modal { position:fixed; inset:0; display:none; align-items:center; justify-content:center; padding:16px; z-index:50; }
        .question-modal.open { display:flex; }
        .question-modal .backdrop { position:absolute; inset:0; background:rgba(15,23,42,0.4); backdrop-filter:blur(4px); }
        .question-dialog { position:relative; background:#ffffff; padding:18px; width:min(620px, 100%); border-radius:16px; box-shadow:0 24px 48px rgba(15,23,42,0.2); z-index:1; border:1px solid #e2e8f0; display:grid; gap:12px; }
        .comment-list { display:grid; gap:10px; max-height:220px; overflow:auto; padding-right:4px; }
        .comment { border:1px solid #e2e8f0; border-radius:12px; padding:10px; background:#f8fafc; }
        .comment-meta { font-size:12px; color:#94a3b8; }
        .comment-form { display:grid; gap:8px; }

        .portal-modal { position:fixed; inset:0; display:none; align-items:center; justify-content:center; padding:16px; z-index:40; }
        .portal-modal.open { display:flex; }
        .portal-backdrop { position:absolute; inset:0; background:rgba(15,23,42,0.38); backdrop-filter: blur(4px); }
        .portal-dialog { position:relative; background:#ffffff; padding:18px; width:min(540px, 100%); max-height:80vh; overflow:auto; border-radius:14px; box-shadow:0 24px 48px rgba(15,23,42,0.18); z-index:1; border:1px solid #e2e8f0; }
        .portal-list { list-style:none; padding:0; margin:12px 0 0; display:grid; gap:10px; }
        .portal-link { display:flex; justify-content:space-between; align-items:center; gap:10px; border:1px solid #e2e8f0; border-radius:12px; padding:12px; background:linear-gradient(135deg, #f8fbff, #eef2ff); }
        .portal-name { font-weight:800; color:#0f172a; }
        .portal-desc { font-size:13px; color:#475569; }

        @keyframes float { 0%,100% { transform:translateY(0);} 50% { transform:translateY(-8px);} }
        @keyframes aurora { 0% { transform: translateX(-10px) scale(1); } 100% { transform: translateX(14px) scale(1.05); } }

        @media (max-width: 900px) {
            .hero-grid { grid-template-columns: 1fr; }
            .dual, .schedule-grid, .notice-grid, .review-grid { grid-template-columns: 1fr; }
        }

        @media (max-width: 640px) {
            .landing-hero { padding: 22px 18px; }
            .landing-hero h1 { font-size: 24px; }
            .hero-sub { font-size: 13px; }
            .hero-panel { margin-top: 8px; }
            .panel-row { flex-direction: column; align-items: flex-start; gap: 4px; }
            .panel-time { min-width: auto; }
            .section-head h2 { font-size: 19px; }
            .section-sub { font-size: 13px; }
            .schedule-grid, .notice-grid, .review-grid { grid-template-columns: 1fr; }
            .landing-section { padding: 18px; }
            .callout-inner { flex-direction: column; align-items: flex-start; }
        }
    </style>

    <div class="container">

        <section class="landing-hero" id="top">
            <div class="hero-aurora"></div>
            <div class="hero-glow"></div>
            <div class="hero-glow-2"></div>
            <div class="hero-grid">
                <div>
                    <p class="eyebrow">ì• í”Œê³¼í•™</p>
                    <h1>ê°œë…ì´ ì„ ëª…í•´ì§€ëŠ” ìˆœê°„,<br>ì„±ì ì´ ë‹¬ë¼ì§‘ë‹ˆë‹¤.</h1>
                    <div class="hero-kicker">ê°œë…ì„ ì™„ì„±í•˜ê³ , ë¬¸ì œë¥¼ ìŒ“ëŠ”ë‹¤.</div>
                    <p class="hero-sub">ëª¨ë“  í•™ìƒì—ê²Œ ê°™ì€ ìˆ˜ì—…ì€ ì—†ìŠµë‹ˆë‹¤. 1:1 í´ë¦¬ë‹‰ì´ ê¸°ë³¸ì…ë‹ˆë‹¤. ê³µë¶€ë¥¼ ê´€ë¦¬ë°›ëŠ” ìˆœê°„, ëª©í‘œëŠ” í˜„ì‹¤ì´ ë©ë‹ˆë‹¤.</p>
                    <div class="hero-tags">
                        <span class="hero-tag">1:1 í´ë¦¬ë‹‰</span>
                        <span class="hero-tag">ë§ì¶¤ ìˆ˜ì—…</span>
                    </div>
                    <div class="hero-actions">
                        <a class="cta primary" href="#schedule" data-scroll>ì‹œê°„í‘œ ë³´ê¸°</a>
                        <a class="cta ghost" href="#notice" data-scroll>ê³µì§€ì‚¬í•­</a>
                    </div>
                    <div class="hero-footnote">
                        <span>ë¬¸ì˜ 02-532-1706</span>
                        <span>ê³ ì†ë²„ìŠ¤í„°ë¯¸ë„ 8-2ë²ˆ ì¶œêµ¬ ì•</span>
                    </div>
                </div>
                <div class="hero-panel">
                    <div class="panel-header">
                        <span class="panel-badge">ì˜¤ëŠ˜ ìˆ˜ì—… ì‹œê°„í‘œ</span>
                        <span>1:1 í´ë¦¬ë‹‰ / ì‹¤í—˜</span>
                    </div>
                    <div class="panel-row">
                        <div class="panel-time">í™” 18:00</div>
                        <div class="panel-desc">ì„¸í™”ê³ 1 ì‹œí—˜ ì§ì „ ë³´ì¶© ìˆ˜ì—…</div>
                    </div>
                    <div class="panel-row">
                        <div class="panel-time">ëª© 19:30</div>
                        <div class="panel-desc">ê³ 1 ë‚´ì‹  ëŒ€ë¹„ Â· í•™êµë³„ ê¸°ì¶œ+ë¹ˆì¹¸ ë…¸íŠ¸ ì •ë¦¬</div>
                    </div>
                    <div class="panel-row">
                        <div class="panel-time">í†  14:00</div>
                        <div class="panel-desc">ê³ 3 íŒŒì´ë„ ëª¨ì˜ Â· ê°œì¸ ì˜¤ë‹µ ë¦¬í¬íŠ¸ í”¼ë“œë°±</div>
                    </div>
                    <div class="panel-metrics">
                        <a class="metric clickable" href="/learning">
                            <div class="metric-icon">ğŸ“š</div>
                            <div>
                                <div class="metric-title">í•™ìŠµ í¬í„¸</div>
                                <div class="metric-sub">ì¶œê²° Â· ìˆ™ì œ Â· ê³µì§€ í•œ ë²ˆì—</div>
                            </div>
                        </a>
                        <button class="metric clickable" type="button" id="portalLinksTrigger">
                            <div class="metric-icon">ğŸŒ</div>
                            <div>
                                <div class="metric-title">ì˜¨ë¼ì¸ í¬í„¸ ì—°ë™</div>
                                <div class="metric-sub">ê³µë¶€ ì‚¬ì´íŠ¸ ë°”ë¡œê°€ê¸°</div>
                            </div>
                        </button>
                    </div>
                </div>
            </div>
        </section>

        <section class="landing-section" id="schedule">
            <div class="section-head">
                <div>
                    <div class="pill">ì‹œê°„í‘œ</div>
                    <h2>ì£¼ì¤‘Â·ì£¼ë§ ìš´ì˜, 1:1 í´ë¦¬ë‹‰ ì¤‘ì‹¬ í¸ì„±</h2>
                    <p class="section-sub">ê³¼ëª©ë³„ 1:1 í´ë¦¬ë‹‰ê³¼ ì‹¤í—˜ ìˆ˜ì—…ì„ í•¨ê»˜ ìš´ì˜í•©ë‹ˆë‹¤.</p>
                </div>
            </div>
            <div class="schedule-grid" th:if="${not #lists.isEmpty(schedules)}">
                <div class="schedule-card" th:each="s : ${schedules}">
                    <div class="schedule-title" th:text="${s.subject}">ê³¼ëª©</div>
                    <div class="schedule-meta">
                        <span class="label-ghost" th:text="${s.school}">í•™êµ</span>
                        <span class="label-ghost" style="margin-left:6px;" th:text="${s.courseType}">ê³¼ì •</span>
                    </div>
                </div>
            </div>
            <div th:if="${#lists.isEmpty(schedules)}" class="muted">ê´€ë¦¬ìê°€ ì‹œê°„í‘œë¥¼ ì¤€ë¹„ ì¤‘ì…ë‹ˆë‹¤.</div>
        </section>

        <section class="landing-section" id="notice">
            <div class="section-head">
                <div>
                    <div class="pill">ê³µì§€ì‚¬í•­</div>
                    <h2>ë°˜í¬ ì• í”Œê³¼í•™ ì†Œì‹</h2>
                </div>
                <a class="btn btn-outline" href="/announcements" style="padding:8px 12px;">ì „ì²´ ê³µì§€ ë³´ê¸° â†’</a>
            </div>
            <div class="notice-grid" th:if="${not #lists.isEmpty(announcements)}">
                <article class="notice-card" th:each="n : ${announcements}">
                    <div class="notice-date" th:text="${n.publishedAt != null ? n.publishedAt : #temporals.format(n.createdAt, 'yyyy.MM.dd')}">ë‚ ì§œ</div>
                    <div class="notice-title" th:text="${n.title}">ê³µì§€ ì œëª©</div>
                    <div class="notice-body" th:text="${n.content}">ë‚´ìš©</div>
                </article>
            </div>
            <div th:if="${#lists.isEmpty(announcements)}" class="muted">ê³µì§€ì‚¬í•­ì´ ì¤€ë¹„ ì¤‘ì…ë‹ˆë‹¤.</div>
        </section>

        <section class="landing-section" id="reviews">
            <div class="section-head">
                <div>
                    <div class="pill">ìˆ˜ê°•í›„ê¸°</div>
                    <h2>í•™ë¶€ëª¨Â·í•™ìƒì´ ë§í•˜ëŠ” ë³€í™”</h2>
                </div>
                <div class="section-sub" style="display:flex; align-items:center; gap:10px; flex-wrap:wrap;">
                    <a class="btn btn-outline" href="/reviews" style="padding:8px 12px;">ì „ì²´ í›„ê¸° ë³´ê¸° â†’</a>
                </div>
            </div>
            <div class="review-grid-wrap" th:if="${not #lists.isEmpty(courseReviews)}">
                <div class="review-grid">
                <div class="review-card"
                     th:each="r : ${courseReviews}"
                     th:data-author="${r.author}"
                     th:data-highlight="${r.highlight}"
                     th:data-rating="${r.rating}"
                     th:data-content="${r.content}"
                     style="min-height:160px; display:flex; flex-direction:column; cursor:pointer;">
                    <div class="review-stars" th:text="${#strings.repeat('â˜…', r.rating) + #strings.repeat('â˜†', 5 - r.rating)}">â˜…â˜…â˜…â˜…â˜…</div>
                    <div class="review-text" th:text="${#strings.abbreviate(r.content,180)}" style="flex:1;">í›„ê¸° ë‚´ìš©</div>
                    <div class="reviewer">
                        <span class="reviewer-name" th:text="${r.author}">ì‘ì„±ì</span>
                        <span class="reviewer-meta" th:if="${r.highlight}" th:text="${r.highlight}">ì„œìš¸ëŒ€ í•©ê²©</span>
                    </div>
                </div>
                </div>
            </div>
            <div th:if="${#lists.isEmpty(courseReviews)}" class="muted">ë“±ë¡ëœ ìˆ˜ê°•í›„ê¸°ê°€ ì—†ìŠµë‹ˆë‹¤.</div>
        </section>

        <!-- ë¦¬ë·° ìƒì„¸ íŒì—… -->
        <div class="review-modal" id="reviewModal" hidden>
            <div class="review-modal__backdrop"></div>
            <div class="review-modal__card">
                <button class="review-modal__close" type="button" aria-label="ë‹«ê¸°">âœ•</button>
                <div class="review-modal__header">
                    <div class="review-stars" id="modalRating">â˜…â˜…â˜…â˜…â˜…</div>
                    <div class="reviewer" style="margin-top:6px;">
                        <span class="reviewer-name" id="modalAuthor">ì‘ì„±ì</span>
                        <span class="reviewer-meta" id="modalHighlight" hidden>í•œì¤„ ì†Œê°œ</span>
                    </div>
                </div>
                <div class="review-modal__body" id="modalContent">ë‚´ìš©</div>
            </div>
        </div>

        <section class="landing-section dual" id="location">
            <div class="location-copy">
                <div class="pill">ì˜¤ì‹œëŠ” ê¸¸</div>
                <h3>ì„œìš¸ ì„œì´ˆêµ¬ ì‹ ë°˜í¬ë¡œ 189 ë°˜í¬ì‡¼í•‘íƒ€ìš´ 4ë™ 402í˜¸</h3>
                <ul class="location-points">
                    <li><span class="label-ghost">ì£¼ì†Œ</span><span>ì„œìš¸ ì„œì´ˆêµ¬ ì‹ ë°˜í¬ë¡œ 189 ë°˜í¬ì‡¼í•‘íƒ€ìš´ 4ë™ 402í˜¸</span></li>
                    <li><span class="label-ghost">ì§€í•˜ì² </span><span>ê³ ì†ë²„ìŠ¤í„°ë¯¸ë„ì—­ 8-2ë²ˆ ì¶œêµ¬ ì• kfc ê±´ë¬¼</span></li>
                    <li><span class="label-ghost">ë¬¸ì˜</span><span>02-532-1706 / ìƒë‹´ ê°€ëŠ¥ ì‹œê°„ 10:00~22:00</span></li>
                </ul>
                <div class="hero-actions" style="margin-top:14px;">
                    <a class="cta primary" href="tel:02-532-1706">ì „í™” ìƒë‹´</a>
                    <a class="cta ghost" href="https://map.naver.com/p/search/%EB%B0%98%ED%8F%AC%EC%95%A0%ED%94%8C%EA%B3%BC%ED%95%99" target="_blank" rel="noreferrer">ì§€ë„ ì—´ê¸°</a>
                </div>
            </div>
            <div class="map-wrap">
                <iframe
                    src="https://www.google.com/maps?q=%EC%95%A0%ED%94%8C%EA%B3%BC%ED%95%99%EA%B5%90%EC%8A%B5%EC%86%8C&output=embed"
                    allowfullscreen=""
                    loading="lazy"
                    referrerpolicy="no-referrer-when-downgrade"></iframe>
            </div>
        </section>

        <section class="landing-section" id="questions">
            <div class="section-head">
                <div>
                    <div class="pill">ì§ˆë¬¸ê²Œì‹œíŒ</div>
                    <h2>ë¬´ì—‡ì´ë“  ììœ ë¡­ê²Œ ì§ˆë¬¸í•˜ì„¸ìš”</h2>
                    <p class="section-sub">ìˆ˜ì—… ì¤‘ ê¶ê¸ˆí–ˆë˜ ì , ì¶”ê°€ ìë£Œ ìš”ì²­ ë“± ë¬´ì—‡ì´ë“  ë‚¨ê¸°ë©´ ë‹µë³€ì„ ë„ì™€ë“œë¦´ê²Œìš”.</p>
                </div>
            </div>
            <div class="question-board" id="questionBoard" th:data-admin="${#authorization.expression('hasAnyAuthority(''ROLE_ADMIN'',''ROLE_ROOT'')')}">
                <form class="question-form" id="questionForm">
                    <div style="display:grid; gap:8px;">
                        <input type="text" id="questionTitle" placeholder="ì œëª©" required>
                        <textarea id="questionContent" placeholder="ê¶ê¸ˆí•œ ì ì„ ì‘ì„±í•´ì£¼ì„¸ìš”." required></textarea>
                        <div style="display:flex; justify-content:flex-end; gap:8px;">
                            <button class="cta ghost" type="reset">ì´ˆê¸°í™”</button>
                            <button class="cta primary" type="submit">ë“±ë¡</button>
                        </div>
                    </div>
                </form>
                <div class="question-list" id="questionList">
                    <div class="question-row header">
                        <div>#</div>
                        <div>ì œëª©</div>
                        <div>ì‘ì„±ì¼</div>
                    </div>
                    <div class="question-row">
                        <div class="pill-soft">1</div>
                        <div>
                            <div class="question-title">ì§ˆë¬¸ ì˜ˆì‹œ: ì‹¬í™” ë¬¸ì œ ìë£Œ ìš”ì²­</div>
                            <div class="question-meta">ì‹¤í—˜ ìˆ˜ì—… ìë£Œ ì¶”ê°€ë¡œ ë°›ì„ ìˆ˜ ìˆì„ê¹Œìš”?</div>
                        </div>
                        <div class="question-meta">ìƒ˜í”Œ</div>
                    </div>
                </div>
            </div>
        </section>

        <div class="question-modal" id="questionModal" aria-hidden="true">
            <div class="backdrop"></div>
            <div class="question-dialog" role="dialog" aria-modal="true">
                <div class="section-head" style="margin-bottom:0;">
                    <div>
                        <div class="pill">ì§ˆë¬¸ ìƒì„¸</div>
                        <h2 id="modalQuestionTitle" style="margin:6px 0 0; font-size:18px;">ì œëª©</h2>
                        <p class="section-sub" id="modalQuestionDate" style="margin:4px 0 0;">ë‚ ì§œ</p>
                    </div>
                    <div class="question-actions">
                        <button class="cta ghost" type="button" id="questionDeleteBtn" style="display:none;">ì‚­ì œ</button>
                        <button class="cta outline" type="button" id="questionCloseBtn">ë‹«ê¸°</button>
                    </div>
                </div>
                <div class="card" style="padding:12px; border:1px solid #e2e8f0; box-shadow:none; background:#f8fafc;">
                    <p class="muted" id="modalQuestionContent" style="margin:0;">ë‚´ìš©</p>
                </div>
                <div>
                    <div class="title-md" style="margin-bottom:6px;">ëŒ“ê¸€</div>
                    <div class="comment-list" id="commentList"></div>
                    <form class="comment-form" id="commentForm">
                        <textarea id="commentContent" placeholder="ìµëª…ìœ¼ë¡œ ëŒ“ê¸€ì„ ë‚¨ê²¨ì£¼ì„¸ìš”." required></textarea>
                        <div style="display:flex; justify-content:flex-end; gap:8px;">
                            <button class="cta primary" type="submit">ëŒ“ê¸€ ë“±ë¡</button>
                        </div>
                    </form>
                </div>
            </div>
        </div>

        <div class="portal-modal" id="portalModal" aria-hidden="true">
            <div class="portal-backdrop"></div>
            <div class="portal-dialog" role="dialog" aria-modal="true">
                <div class="section-head" style="margin-bottom:10px;">
                    <div>
                        <div class="pill">í•™ìŠµ í¬í„¸</div>
                        <h2 style="margin:6px 0 0; font-size:18px;">ê³µë¶€ì— ë„ì›€ì´ ë˜ëŠ” ë§í¬</h2>
                    </div>
                    <button class="cta ghost" type="button" id="portalCloseBtn">ë‹«ê¸°</button>
                </div>
                <p class="section-sub" style="margin-top:0;">ìì£¼ ì‚¬ìš©í•˜ëŠ” í•™ìŠµ ì‚¬ì´íŠ¸ë¥¼ ëª¨ì•„ì„œ ì—´ì–´ë³´ì„¸ìš”.</p>
                <ul class="portal-list">
                    <li class="portal-link">
                        <div>
                            <div class="portal-name">EBS</div>
                            <div class="portal-desc">ê³µë¶€ì— ë„ì›€ì´ ë˜ëŠ” ëŒ€í‘œ í¬í„¸ (ebs.com)</div>
                        </div>
                        <a class="cta primary" href="https://www.ebs.co.kr" target="_blank" rel="noreferrer">ë°”ë¡œê°€ê¸°</a>
                    </li>
                    <li class="portal-link">
                        <div>
                            <div class="portal-name">ë©”ê°€ìŠ¤í„°ë””</div>
                            <div class="portal-desc">ì „ ê³¼ëª© ì¸ê°•</div>
                        </div>
                        <a class="cta primary" href="https://www.megastudy.net/" target="_blank" rel="noreferrer">ë°”ë¡œê°€ê¸°</a>
                    </li>
                    <li class="portal-link">
                        <div>
                            <div class="portal-name">ëŒ€ì„±ë§ˆì´ë§¥</div>
                            <div class="portal-desc">ê¸°ë³¸+ì‹¬í™” ê°•ì˜</div>
                        </div>
                        <a class="cta primary" href="https://www.mymac.co.kr/" target="_blank" rel="noreferrer">ë°”ë¡œê°€ê¸°</a>
                    </li>
                    <li class="portal-link">
                        <div>
                            <div class="portal-name">ì´íˆ¬ìŠ¤</div>
                            <div class="portal-desc">ìˆ˜ëŠ¥/ë‚´ì‹  ê°•ì˜</div>
                        </div>
                        <a class="cta primary" href="https://www.etutors.com/" target="_blank" rel="noreferrer">ë°”ë¡œê°€ê¸°</a>
                    </li>
                    <li class="portal-link">
                        <div>
                            <div class="portal-name">EBSi ê¸°ì¶œ</div>
                            <div class="portal-desc">ê³µì‹ ë¬´ë£Œ ê¸°ì¶œ/í•™ìŠµìë£Œ</div>
                        </div>
                            <a class="cta primary" href="https://www.ebs.co.kr/ebsapp/front/main" target="_blank" rel="noreferrer">ë°”ë¡œê°€ê¸°</a>
                    </li>
                    <li class="portal-link">
                        <div>
                            <div class="portal-name">ì¡±ë³´ë‹·ì»´</div>
                            <div class="portal-desc">í•™êµ ì‹œí—˜/ê¸°ì¶œ ìë£Œ ê³µìœ </div>
                        </div>
                        <a class="cta primary" href="https://www.jokbo.com/" target="_blank" rel="noreferrer">ë°”ë¡œê°€ê¸°</a>
                    </li>
                    <li class="portal-link">
                        <div>
                            <div class="portal-name">ë§ˆë”í…… ê¸°ì¶œ</div>
                            <div class="portal-desc">ê¸°ì¶œ ë¬¸ì œì§‘ ì¶œíŒì‚¬</div>
                        </div>
                        <a class="cta primary" href="https://www.mdotung.co.kr/" target="_blank" rel="noreferrer">ë°”ë¡œê°€ê¸°</a>
                    </li>
                    <li class="portal-link">
                        <div>
                            <div class="portal-name">Notion</div>
                            <div class="portal-desc">ë…¸íŠ¸/ì˜¤ë‹µë…¸íŠ¸/í”Œë˜ë„ˆ</div>
                        </div>
                        <a class="cta primary" href="https://www.notion.so/" target="_blank" rel="noreferrer">ë°”ë¡œê°€ê¸°</a>
                    </li>
                    <li class="portal-link">
                        <div>
                            <div class="portal-name">Anki</div>
                            <div class="portal-desc">ì•”ê¸° í”Œë˜ì‹œì¹´ë“œ</div>
                        </div>
                        <a class="cta primary" href="https://apps.ankiweb.net/" target="_blank" rel="noreferrer">ë°”ë¡œê°€ê¸°</a>
                    </li>
                    <li class="portal-link">
                        <div>
                            <div class="portal-name">Forest</div>
                            <div class="portal-desc">ì§‘ì¤‘ íƒ€ì´ë¨¸ ì•±</div>
                        </div>
                        <a class="cta primary" href="https://www.forestapp.cc/" target="_blank" rel="noreferrer">ë°”ë¡œê°€ê¸°</a>
                    </li>
                    <li class="portal-link">
                        <div>
                            <div class="portal-name">Study Bunny</div>
                            <div class="portal-desc">ì§‘ì¤‘ íƒ€ì´ë¨¸ ì•±</div>
                        </div>
                        <a class="cta primary" href="https://studybunny.com/" target="_blank" rel="noreferrer">ë°”ë¡œê°€ê¸°</a>
                    </li>
                </ul>
            </div>
        </div>

    </div>

</div>

<script>
    document.querySelectorAll('[data-scroll]').forEach(link => {
        link.addEventListener('click', (e) => {
            const targetId = link.getAttribute('href')?.split('#')[1];
            const el = targetId ? document.getElementById(targetId) : null;
            if (el) {
                e.preventDefault();
                el.scrollIntoView({ behavior: 'smooth', block: 'start' });
            }
        });
    });

    const portalModal = document.getElementById('portalModal');
    const portalBackdrop = portalModal?.querySelector('.portal-backdrop');
    const portalClose = document.getElementById('portalCloseBtn');
    const openPortalModal = () => portalModal?.classList.add('open');
    const closePortalModal = () => portalModal?.classList.remove('open');

    document.querySelectorAll('#portalLinksTrigger').forEach(btn => {
        btn.addEventListener('click', openPortalModal);
    });
    portalBackdrop?.addEventListener('click', closePortalModal);
    portalClose?.addEventListener('click', closePortalModal);
    document.addEventListener('keydown', (e) => {
        if (e.key === 'Escape') closePortalModal();
    });

    // ìˆ˜ê°•í›„ê¸° íŒì—…
    const reviewModal = document.getElementById('reviewModal');
    if (reviewModal) {
        const modalAuthor = document.getElementById('modalAuthor');
        const modalHighlight = document.getElementById('modalHighlight');
        const modalContent = document.getElementById('modalContent');
        const modalRating = document.getElementById('modalRating');
        const closeReviewModal = () => reviewModal.setAttribute('hidden', '');

        reviewModal.querySelector('.review-modal__backdrop')?.addEventListener('click', closeReviewModal);
        reviewModal.querySelector('.review-modal__close')?.addEventListener('click', closeReviewModal);
        document.addEventListener('keydown', (e) => { if (e.key === 'Escape') closeReviewModal(); });

        document.querySelectorAll('.review-card').forEach(card => {
            card.addEventListener('click', () => {
                const author = card.dataset.author || '';
                const highlight = card.dataset.highlight || '';
                const content = card.dataset.content || '';
                const rating = Number(card.dataset.rating || 0);

                modalAuthor.textContent = author;
                if (highlight && modalHighlight) {
                    modalHighlight.textContent = highlight;
                    modalHighlight.hidden = false;
                } else if (modalHighlight) {
                    modalHighlight.hidden = true;
                }
                modalContent.textContent = content;
                modalRating.textContent = 'â˜…'.repeat(rating) + 'â˜†'.repeat(5 - rating);
                reviewModal.removeAttribute('hidden');
            });
        });
    }

    // ê°„ë‹¨í•œ í”„ëŸ°íŠ¸ì—”ë“œ ì§ˆë¬¸ ê²Œì‹œíŒ (ë¡œì»¬ ì €ì¥)
    const boardEl = document.getElementById('questionBoard');
    const form = document.getElementById('questionForm');
    const listEl = document.getElementById('questionList');
    const titleEl = document.getElementById('questionTitle');
    const contentEl = document.getElementById('questionContent');
    const modal = document.getElementById('questionModal');
    const modalTitle = document.getElementById('modalQuestionTitle');
    const modalDate = document.getElementById('modalQuestionDate');
    const modalContent = document.getElementById('modalQuestionContent');
    const commentList = document.getElementById('commentList');
    const commentForm = document.getElementById('commentForm');
    const commentContent = document.getElementById('commentContent');
    const deleteBtn = document.getElementById('questionDeleteBtn');
    const closeBtn = document.getElementById('questionCloseBtn');
    const isAdmin = boardEl?.dataset?.admin === 'true';
    const STORAGE_KEY = 'apple_science_questions_v2';
    let activeQuestionId = null;

    const loadQuestions = () => {
        try {
            return JSON.parse(localStorage.getItem(STORAGE_KEY) || '[]');
        } catch (e) {
            return [];
        }
    };
    const saveQuestions = (items) => localStorage.setItem(STORAGE_KEY, JSON.stringify(items));

    const renderQuestions = () => {
        if (!listEl) return;
        const items = loadQuestions();
        listEl.querySelectorAll('.question-row:not(.header)').forEach(el => el.remove());
        const fragment = document.createDocumentFragment();
        items.forEach((q, idx) => {
            const row = document.createElement('div');
            row.className = 'question-row';
            const btn = document.createElement('button');
            btn.className = 'question-title-btn';
            btn.type = 'button';
            btn.textContent = q.title;
            btn.addEventListener('click', () => openQuestion(q.id));

            row.appendChild(Object.assign(document.createElement('div'), { className: 'pill-soft', textContent: idx + 1 }));
            const desc = document.createElement('div');
            desc.appendChild(btn);
            desc.appendChild(Object.assign(document.createElement('div'), { className: 'question-meta', textContent: q.content }));
            row.appendChild(desc);
            row.appendChild(Object.assign(document.createElement('div'), { className: 'question-meta', textContent: q.date }));
            fragment.appendChild(row);
        });
        listEl.appendChild(fragment);
    };

    const openQuestion = (id) => {
        const q = loadQuestions().find(item => item.id === id);
        if (!q || !modal) return;
        activeQuestionId = id;
        modalTitle.textContent = q.title;
        modalDate.textContent = q.date;
        modalContent.textContent = q.content;
        deleteBtn.style.display = isAdmin ? 'inline-flex' : 'none';
        renderComments(q);
        modal.classList.add('open');
    };

    const closeQuestion = () => {
        modal?.classList.remove('open');
        activeQuestionId = null;
    };

    const renderComments = (q) => {
        if (!commentList) return;
        commentList.innerHTML = '';
        const items = q.comments || [];
        if (!items.length) {
            const empty = document.createElement('div');
            empty.className = 'muted';
            empty.textContent = 'ì•„ì§ ëŒ“ê¸€ì´ ì—†ìŠµë‹ˆë‹¤. ì²« ëŒ“ê¸€ì„ ë‚¨ê²¨ë³´ì„¸ìš”.';
            commentList.appendChild(empty);
            return;
        }
        items.forEach(c => {
            const el = document.createElement('div');
            el.className = 'comment';
            el.innerHTML = `<div>${c.content}</div><div class="comment-meta">${c.date} Â· ìµëª…</div>`;
            commentList.appendChild(el);
        });
    };

    form?.addEventListener('submit', (e) => {
        e.preventDefault();
        const title = titleEl?.value?.trim();
        const content = contentEl?.value?.trim();
        if (!title || !content) return;
        const now = new Date();
        const date = `${now.getFullYear()}.${String(now.getMonth() + 1).padStart(2, '0')}.${String(now.getDate()).padStart(2, '0')}`;
        const items = loadQuestions();
        items.unshift({ id: crypto.randomUUID ? crypto.randomUUID() : `${Date.now()}-${Math.random()}`, title, content, date, comments: [] });
        saveQuestions(items.slice(0, 50));
        form.reset();
        renderQuestions();
    });

    commentForm?.addEventListener('submit', (e) => {
        e.preventDefault();
        if (!activeQuestionId) return;
        const text = commentContent?.value?.trim();
        if (!text) return;
        const now = new Date();
        const date = `${now.getFullYear()}.${String(now.getMonth() + 1).padStart(2, '0')}.${String(now.getDate()).padStart(2, '0')}`;
        const items = loadQuestions();
        const idx = items.findIndex(q => q.id === activeQuestionId);
        if (idx === -1) return;
        const q = items[idx];
        q.comments = q.comments || [];
        q.comments.unshift({ id: `${Date.now()}-${Math.random()}`, content: text, date });
        saveQuestions(items);
        commentForm.reset();
        renderComments(q);
        renderQuestions();
    });

    deleteBtn?.addEventListener('click', () => {
        if (!isAdmin || !activeQuestionId) return;
        const items = loadQuestions().filter(q => q.id !== activeQuestionId);
        saveQuestions(items);
        closeQuestion();
        renderQuestions();
    });

    closeBtn?.addEventListener('click', closeQuestion);
    modal?.querySelector('.backdrop')?.addEventListener('click', closeQuestion);

    renderQuestions();
</script>
</body>
</html>
