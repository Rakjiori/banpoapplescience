<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" lang="ko"
      th:replace="layout :: layout(~{::body})">
<body>
<div>
    <section class="group-hero">
        <div class="group-hero__eyebrow">My folders</div>
        <div class="group-hero__heading">
            <h1 class="page-title">ë‚´ í´ë”</h1>
            <p class="group-hero__text">ê³¼ëª©ë³„ë¡œ í´ë”ë¥¼ ë§Œë“¤ì–´ PDFì™€ ë¬¸ì œë¥¼ ì •ë¦¬í•˜ì„¸ìš”.</p>
        </div>
        <div class="group-hero__stats">
            <div class="stat-chip">
                ì „ì²´ í´ë” <strong th:text="${#lists.size(folders)}">0</strong>ê°œ
            </div>
            <a href="/document/list" class="ghost-link">ğŸ“‘ ë¬¸ì„œ ë°”ë¡œê°€ê¸°</a>
        </div>
    </section>

    <div th:if="${error}" class="alert alert-danger" style="margin-bottom:12px;">
        <span th:text="${error}"></span>
    </div>

    <div class="group-grid group-grid--actions" style="margin-bottom:10px;">
        <div class="group-action-card" style="height:100%;">
            <div>
                <div class="group-action__title">ìƒˆ í´ë” ì¶”ê°€</div>
                <p class="group-action__desc">ê³¼ëª©ì´ë‚˜ ì±•í„°ë³„ë¡œ í´ë”ë¥¼ ë§Œë“¤ì–´ ì •ë¦¬í•˜ì„¸ìš”.</p>
            </div>
            <form th:action="@{/folders}" method="post" class="group-inline-form">
                <input type="hidden"
                       th:name="${_csrf.parameterName}"
                       th:value="${_csrf.token}">
                <input id="newFolderName"
                       type="text"
                       name="name"
                       placeholder="ì˜ˆ: ì•Œê³ ë¦¬ì¦˜, ë„¤íŠ¸ì›Œí¬"
                       class="group-input">
                <button type="submit" class="btn group-inline-btn">ì¶”ê°€</button>
            </form>
        </div>
    </div>

    <div class="group-grid">
        <div th:each="folder : ${folders}"
             class="folder-card-modern"
             th:data-link="@{/document/list(folderId=${folder.id})}">
            <div class="folder-card__top">
                <div class="folder-card__name" th:text="${folder.name}">í´ë”</div>
                <span class="folder-card__date"
                      th:text="${#temporals.format(folder.createdAt, 'yyyy.MM.dd')}">ë‚ ì§œ</span>
            </div>
            <p class="folder-card__desc">í´ë¦­í•´ì„œ PDFì™€ ë¬¸ì œ ë³´ê¸°</p>
            <div class="folder-card__footer">
                <div class="folder-card__meta">ìµœê·¼ ìƒì„± Â· ê´€ë¦¬</div>
                <form th:if="${folder.name != 'ë§ì€ ë¬¸ì œ' and folder.name != 'í‹€ë¦° ë¬¸ì œ'}"
                      th:action="@{/folders/delete}" method="post"
                      onsubmit="return confirm('í´ë” ì•ˆì˜ PDFì™€ ë¬¸ì œë¥¼ ëª¨ë‘ ì‚­ì œí• ê¹Œìš”?');">
                    <input type="hidden" name="folderId" th:value="${folder.id}">
                    <input type="hidden" th:name="${_csrf.parameterName}" th:value="${_csrf.token}">
                    <button type="submit" class="btn btn-outline" style="padding:6px 10px;">ğŸ—‘ ì‚­ì œ</button>
                </form>
            </div>
        </div>
    </div>

</div>
<script>
    document.addEventListener('DOMContentLoaded', () => {
        document.querySelectorAll('.folder-card-modern').forEach(card => {
            card.addEventListener('click', (e) => {
                if (e.target.closest('form') || e.target.tagName === 'BUTTON') return;
                const link = card.dataset.link;
                if (link) window.location.href = link;
            });
        });
    });
</script>
</body>
</html>
